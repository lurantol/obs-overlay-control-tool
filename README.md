# OBS Overlay Control Tool

Инструмент для управления текстовыми оверлеями OBS на танцевальных фестивалях
(West Coast Swing и аналогичные форматы).

---

## Назначение

Приложение предназначено для оператора трансляции и решает задачу
быстрого, безопасного и структурированного вывода текстовой информации в OBS:

- текущая номинация в эфире;
- текущая пара (для финалов);
- отборы / prelims / semis с Hit’ами;
- анонс следующего дивизиона (NEXT);
- показательные выступления (Special / Show / Formation);
- работа с реальными списками участников из CSV / Excel.

Приложение работает **локально**, без интернета, и управляет OBS через
текстовые файлы.

---

## Как это работает (общая схема)

1. Приложение запускается на ноутбуке оператора.
2. Управление осуществляется через браузер (Mac / iPad).
3. Приложение записывает текст в файлы.
4. OBS читает эти файлы через `Text (from file)` и автоматически обновляет эфир.

Связь с OBS осуществляется **только через файлы**, без WebSocket и плагинов,
что обеспечивает максимальную надёжность в эфире.

---

## Источники в OBS

Необходимо создать 3 текстовых источника:

- `out/current_title.txt` — что сейчас в эфире
- `out/current_pair.txt` — текущая пара или название номера
- `out/next_title.txt` — следующий дивизион (NEXT)

---

## Вкладка «Эфир»

Основная рабочая панель оператора.

### Финалы
Используется для конкурсов с парами:
- выбор номинации;
- выбор любых двух участников;
- кнопка «Применить в эфир».

Результат:
- `current_title` — название финала;
- `current_pair` — «Имя — Имя».

Hit’ы отсутствуют.

---

### Отборы
Используется для prelims / semis:
- выбор номинации;
- выбор Hit кнопками;
- кнопка «Применить в эфир».

Результат:
- `current_title` — «Номинация • Hit X»;
- `current_pair` очищается.

---

### NEXT
Отдельный режим анонса:
- выбор следующей номинации;
- Hit — только для отборов;
- кнопка «Применить NEXT».

Результат:
- `next_title` — «NEXT: …».

---

### Special
Используется для показательных и шоу-выступлений:
- ProShow;
- Team Show;
- Formation;
- Guest Performance и т.п.

Логика:
- выбирается тип Special;
- вводится название номера / команды;
- данные выводятся в эфир без привязки к участникам.

Результат:
- `current_title` — тип выступления;
- `current_pair` — название номера или команды.

---

## Вкладка «Админ»

Раздел подготовки и настройки.

### Номинации
- добавление финалов и отборов;
- указание типа (финалы / отборы);
- ограничение списка участников для конкретной номинации;
- настройка кнопок Hit.

---

### Special
Каталог типов показательных выступлений:
- добавление / редактирование типов (ProShow, Team Show и т.д.);
- используется в Эфире → Special.

---

### Импорт
Импорт участников из CSV / XLS / XLSX:

1. Загрузка файла.
2. Просмотр заголовков.
3. Выбор колонки с номером и колонки с именем.
4. Импорт данных.

Роли назначаются автоматически:
- нечётный номер → lead;
- чётный номер → follow.

Роль не ограничивает выбор в финалах.

---

## Запуск

### Требования
- macOS
- Node.js 18+
- OBS Studio

### Установка
```
npm install
```

### Запуск
```
npm start
```

### Открытие интерфейса
- Mac: http://localhost:3000
- iPad / другое устройство: http://IP_Мака:3000

---

## Почему такая архитектура

- файлы вместо WebSocket — максимальная стабильность;
- локальный сервер — независимость от интернета;
- чёткое разделение режимов;
- минимизация ошибок в эфире;
- подходит под реальные фестивальные сценарии.

---

## Целевая аудитория

- операторы OBS;
- медиакоманды танцевальных фестивалей;
- организаторы соревнований;
- ситуации с высокой нагрузкой и ответственностью за эфир.
